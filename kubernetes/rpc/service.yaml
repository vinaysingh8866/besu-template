---
# Internal service for other pods
apiVersion: v1
kind: Service
metadata:
  name: besu-rpc-internal
  namespace: besu-network
  labels:
    app: besu-rpc
    network: Besu
spec:
  type: ClusterIP
  selector:
    app: besu-rpc
  ports:
    - name: http-rpc
      port: 8545
      targetPort: 8545
      protocol: TCP
    - name: ws-rpc
      port: 8546
      targetPort: 8546
      protocol: TCP
    - name: metrics
      port: 9545
      targetPort: 9545
      protocol: TCP
---
# External service for outside access (local dev)
apiVersion: v1
kind: Service
metadata:
  name: besu-rpc
  namespace: besu-network
  labels:
    app: besu-rpc
    network: Besu
spec:
  type: NodePort
  selector:
    app: besu-rpc
  ports:
    - name: http-rpc
      port: 8545
      targetPort: 8545
      nodePort: 30545
      protocol: TCP
    - name: ws-rpc
      port: 8546
      targetPort: 8546
      nodePort: 30546
      protocol: TCP
